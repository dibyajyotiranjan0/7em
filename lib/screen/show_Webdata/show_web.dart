import 'package:flutter/material.dart';
import 'package:webview_flutter/webview_flutter.dart';
import 'package:provider/provider.dart';
import '../../viewmodel/myAds/myads_viewmodel.dart';

class ShowWeb extends StatefulWidget {
  // final String urll;
  // ShowWeb({required this.urll, super.key});

  @override
  State<ShowWeb> createState() => _ShowWebState();
}

class _ShowWebState extends State<ShowWeb> {
  String htmlContent =
      "\r\n<!DOCTYPE html>\r\n<html lang=\"en\">\r\n  <head>\r\n    <meta charset=\"utf-8\">\r\n    <meta content=\"width=device-width, initial-scale=1.0\" name=\"viewport\">\r\n    <meta content=\"\" name=\"description\">\r\n    <meta content=\"\" name=\"keywords\">\r\n    <title>7 Emirate</title>\r\n    \r\n    <!-- Favicons -->\r\n    <link href=\"https://7em.app/admin/public/assets/img/favicon.png\" rel=\"icon\" />\r\n    <link href=\"https://7em.app/admin/public/assets/img/apple-touch-icon.png\" rel=\"apple-touch-icon\" />\r\n    <link href=\"https://7em.app/admin/public/assets/css/google-font.css\" rel=\"stylesheet\" />\r\n\r\n    <!-- Google Fonts -->\r\n    <link href=\"https://fonts.gstatic.com\" rel=\"preconnect\">\r\n    <link href=\"https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Nunito:300,300i,400,400i,600,600i,700,700i|Poppins:300,300i,400,400i,500,500i,600,600i,700,700i\" rel=\"stylesheet\">\r\n\r\n    <!-- Vendor CSS Files -->\r\n    <link rel=\"stylesheet\" type=\"text/css\" href=\"https://7em.app/admin/public/assets/vendor/bootstrap/css/bootstrap.min.css\" />\r\n    <link rel=\"stylesheet\" type=\"text/css\" href=\"https://7em.app/admin/public/assets/vendor/bootstrap-icons/bootstrap-icons.css\" />\r\n    <link rel=\"stylesheet\" type=\"text/css\" href=\"https://7em.app/admin/public/assets/vendor/boxicons/css/boxicons.min.css\" />\r\n    <link rel=\"stylesheet\" type=\"text/css\" href=\"https://7em.app/admin/public/assets/vendor/quill/quill.snow.css\" />\r\n    <link rel=\"stylesheet\" type=\"text/css\" href=\"https://7em.app/admin/public/assets/vendor/quill/quill.bubble.css\" />\r\n    <link rel=\"stylesheet\" type=\"text/css\" href=\"https://7em.app/admin/public/assets/vendor/remixicon/remixicon.css\" />\r\n    <link rel=\"stylesheet\" type=\"text/css\" href=\"https://7em.app/admin/public/assets/vendor/simple-datatables/style.css\" />\r\n    <link rel=\"stylesheet\" type=\"text/css\" href=\"https://7em.app/admin/public/assets/sweet-alert2/sweetalert2.css\">\r\n\r\n    <!-- Template Main CSS File -->\r\n    <link rel=\"stylesheet\" type=\"text/css\" href=\"https://7em.app/admin/public/assets/css/style.css\" />\r\n    <link rel=\"stylesheet\" type=\"text/css\" href=\"https://7em.app/admin/public/assets/css/custom.css\" />\r\n\r\n    <script type=\"text/javascript\">\r\n      var SITE_URL = \"https://7em.app/admin//\";\r\n      var ASSETS = \"https://7em.app/admin//\";\r\n    </script>\r\n    <style type=\"text/css\">\r\n      .error{\r\n        color: red;\r\n      }\r\n    </style>\r\n  </head>\r\n  <body class=\"login-bg\">\r\n    <main>\r\n      <div class=\"container\">\r\n        <section class=\"section register min-vh-100 d-flex flex-column align-items-center justify-content-center py-4\">\r\n          <div class=\"container\">\r\n            <div class=\"row justify-content-center\">\r\n              <div class=\"col-lg-4 col-md-6 d-flex flex-column align-items-center justify-content-center\">\r\n                <div class=\"d-flex justify-content-center py-4\">\r\n                  <a href=\"javascript:void(0);\" class=\"logo d-flex align-items-center w-auto\">\r\n                    <img src=\"https://7em.app/admin/public/assets/img/7em.jpg\" alt=\"LOGO\">\r\n                  </a>\r\n                </div>\r\n                <div class=\"card mb-3\">\r\n                  <div class=\"card-body\">\r\n                    <div class=\"pt-4 pb-2\">\r\n                      <h5 class=\"text-center pb-0 fs-4\">Login</h5>\r\n                    </div>\r\n                    <form class=\"row g-3 needs-validation\" method=\"POST\" name=\"login\" action=\"https://7em.app/admin/login-check\">\r\n                      <input type=\"hidden\" name=\"_token\" value=\"XX7qADxhzg39du62hmUb4krRrv8kXkVzsYonPeaO\">                      <div class=\"col-12\">\r\n                        <label for=\"yourUsername\" class=\"form-label\">Username</label>\r\n                        <div class=\"input-group has-validation\">\r\n                          <input type=\"text\" name=\"user_name\" class=\"form-control hitenter \" id=\"user_name\">\r\n                                                    <div class=\"invalid-feedback\">Please enter your username.</div>\r\n                        </div>\r\n                      </div>\r\n                      <div class=\"col-12\">\r\n                        <label for=\"yourPassword\" class=\"form-label\">Password</label>\r\n                        <input type=\"password\" name=\"password\" class=\"form-control hitenter \" id=\"password\" required>\r\n                        <i class=\"bi bi-eye-slash toggle-password icnsty\" toggle=\"#password\"></i>\r\n                                                <div class=\"invalid-feedback\">Please enter your password!</div>\r\n                      </div>\r\n                      <div class=\"col-8\">\r\n                        <div class=\"form-check\">\r\n                          <input class=\"form-check-input\" type=\"checkbox\" name=\"remember\" value=\"true\" id=\"rememberMe\">\r\n                          <label class=\"form-check-label\" for=\"rememberMe\">Remember me</label>\r\n                        </div>\r\n                      </div>\r\n                      <div class=\"col-4\">\r\n                        <!-- <p class=\"small mb-0\"> <a href=\"javascript:vodi(0);\">Forgot Password</a></p> -->\r\n                      </div>\r\n                                            <div class=\"col-12\">\r\n                        <button class=\"btn btn-primary w-100\" type=\"submit\">Login</button>\r\n                      </div>\r\n                    </form>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </section>\r\n      </div>\r\n    </main>\r\n    <a href=\"#\" class=\"back-to-top d-flex align-items-center justify-content-center\"><i class=\"bi bi-arrow-up-short\"></i></a>\r\n\r\n    <script type=\"text/javascript\" src=\"https://7em.app/admin/public/assets/js/jquery.min.js\"></script>\r\n    <script type=\"text/javascript\" src=\"https://7em.app/admin/public/assets/vendor/apexcharts/apexcharts.min.js\"></script>\r\n    <script type=\"text/javascript\" src=\"https://7em.app/admin/public/assets/vendor/bootstrap/js/bootstrap.bundle.min.js\"></script>\r\n    <script type=\"text/javascript\" src=\"https://7em.app/admin/public/assets/vendor/chart.js/chart.umd.js\"></script>\r\n    <script type=\"text/javascript\" src=\"https://7em.app/admin/public/assets/vendor/echarts/echarts.min.js\"></script>\r\n    <script type=\"text/javascript\" src=\"https://7em.app/admin/public/assets/vendor/quill/quill.min.js\"></script>\r\n    <script type=\"text/javascript\" src=\"https://7em.app/admin/public/assets/vendor/simple-datatables/simple-datatables.js\"></script>\r\n    <script type=\"text/javascript\" src=\"https://7em.app/admin/public/assets/vendor/tinymce/tinymce.min.js\"></script>\r\n    <script type=\"text/javascript\" src=\"https://7em.app/admin/public/assets/js/common.js\"></script>\r\n    <script type=\"text/javascript\" src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery-validate/1.19.1/jquery.validate.min.js\"></script>\r\n    <script type=\"text/javascript\" src=\"https://7em.app/admin/public/assets/js/main.js\"></script>\r\n    <script type=\"text/javascript\" src=\"https://7em.app/admin/public/assets/validation/login.js\"></script>\r\n  </body>\r\n</html>";
  // "\r\n<!DOCTYPE html>\r\n<html lang=\"en\">\r\n  <head>\r\n    <meta charset=\"utf-8\">\r\n    <meta content=\"width=device-width, initial-scale=1.0\" name=\"viewport\">\r\n    <meta content=\"\" name=\"description\">\r\n    <meta content=\"\" name=\"keywords\">\r\n    <title>7 Emirate</title>\r\n    \r\n    <!-- Favicons -->\r\n    <link href=\"https://7em.app/admin/public/assets/img/favicon.png\" rel=\"icon\" />\r\n    <link href=\"https://7em.app/admin/public/assets/img/apple-touch-icon.png\" rel=\"apple-touch-icon\" />\r\n    <link href=\"https://7em.app/admin/public/assets/css/google-font.css\" rel=\"stylesheet\" />\r\n\r\n    <!-- Google Fonts -->\r\n    <link href=\"https://fonts.gstatic.com\" rel=\"preconnect\">\r\n    <link href=\"https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Nunito:300,300i,400,400i,600,600i,700,700i|Poppins:300,300i,400,400i,500,500i,600,600i,700,700i\" rel=\"stylesheet\">\r\n\r\n    <!-- Vendor CSS Files -->\r\n    <link rel=\"stylesheet\" type=\"text/css\" href=\"https://7em.app/admin/public/assets/vendor/bootstrap/css/bootstrap.min.css\" />\r\n    <link rel=\"stylesheet\" type=\"text/css\" href=\"https://7em.app/admin/public/assets/vendor/bootstrap-icons/bootstrap-icons.css\" />\r\n    <link rel=\"stylesheet\" type=\"text/css\" href=\"https://7em.app/admin/public/assets/vendor/boxicons/css/boxicons.min.css\" />\r\n    <link rel=\"stylesheet\" type=\"text/css\" href=\"https://7em.app/admin/public/assets/vendor/quill/quill.snow.css\" />\r\n    <link rel=\"stylesheet\" type=\"text/css\" href=\"https://7em.app/admin/public/assets/vendor/quill/quill.bubble.css\" />\r\n    <link rel=\"stylesheet\" type=\"text/css\" href=\"https://7em.app/admin/public/assets/vendor/remixicon/remixicon.css\" />\r\n    <link rel=\"stylesheet\" type=\"text/css\" href=\"https://7em.app/admin/public/assets/vendor/simple-datatables/style.css\" />\r\n    <link rel=\"stylesheet\" type=\"text/css\" href=\"https://7em.app/admin/public/assets/sweet-alert2/sweetalert2.css\">\r\n\r\n    <!-- Template Main CSS File -->\r\n    <link rel=\"stylesheet\" type=\"text/css\" href=\"https://7em.app/admin/public/assets/css/style.css\" />\r\n    <link rel=\"stylesheet\" type=\"text/css\" href=\"https://7em.app/admin/public/assets/css/custom.css\" />\r\n\r\n    <script type=\"text/javascript\">\r\n      var SITE_URL = \"https://7em.app/admin//\";\r\n      var ASSETS = \"https://7em.app/admin//\";\r\n    </script>\r\n    <style type=\"text/css\">\r\n      .error{\r\n        color: red;\r\n      }\r\n    </style>\r\n  </head>\r\n  <body class=\"login-bg\">\r\n    <main>\r\n      <div class=\"container\">\r\n        <section class=\"section register min-vh-100 d-flex flex-column align-items-center justify-content-center py-4\">\r\n          <div class=\"container\">\r\n            <div class=\"row justify-content-center\">\r\n              <div class=\"col-lg-4 col-md-6 d-flex flex-column align-items-center justify-content-center\">\r\n                <div class=\"d-flex justify-content-center py-4\">\r\n                  <a href=\"javascript:void(0);\" class=\"logo d-flex align-items-center w-auto\">\r\n                    <img src=\"https://7em.app/admin/public/assets/img/7em.jpg\" alt=\"LOGO\">\r\n                  </a>\r\n                </div>\r\n                <div class=\"card mb-3\">\r\n                  <div class=\"card-body\">\r\n                    <div class=\"pt-4 pb-2\">\r\n                      <h5 class=\"text-center pb-0 fs-4\">Login</h5>\r\n                    </div>\r\n                    <form class=\"row g-3 needs-validation\" method=\"POST\" name=\"login\" action=\"https://7em.app/admin/login-check\">\r\n                      <input type=\"hidden\" name=\"_token\" value=\"XX7qADxhzg39du62hmUb4krRrv8kXkVzsYonPeaO\">                      <div class=\"col-12\">\r\n                        <label for=\"yourUsername\" class=\"form-label\">Username</label>\r\n                        <div class=\"input-group has-validation\">\r\n                          <input type=\"text\" name=\"user_name\" class=\"form-control hitenter \" id=\"user_name\">\r\n                                                    <div class=\"invalid-feedback\">Please enter your username.</div>\r\n                        </div>\r\n                      </div>\r\n                      <div class=\"col-12\">\r\n                        <label for=\"yourPassword\" class=\"form-label\">Password</label>\r\n                        <input type=\"password\" name=\"password\" class=\"form-control hitenter \" id=\"password\" required>\r\n                        <i class=\"bi bi-eye-slash toggle-password icnsty\" toggle=\"#password\"></i>\r\n                                                <div class=\"invalid-feedback\">Please enter your password!</div>\r\n                      </div>\r\n                      <div class=\"col-8\">\r\n                        <div class=\"form-check\">\r\n                          <input class=\"form-check-input\" type=\"checkbox\" name=\"remember\" value=\"true\" id=\"rememberMe\">\r\n                          <label class=\"form-check-label\" for=\"rememberMe\">Remember me</label>\r\n                        </div>\r\n                      </div>\r\n                      <div class=\"col-4\">\r\n                        <!-- <p class=\"small mb-0\"> <a href=\"javascript:vodi(0);\">Forgot Password</a></p> -->\r\n                      </div>\r\n                                            <div class=\"col-12\">\r\n                        <button class=\"btn btn-primary w-100\" type=\"submit\">Login</button>\r\n                      </div>\r\n                    </form>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </section>\r\n      </div>\r\n    </main>\r\n    <a href=\"#\" class=\"back-to-top d-flex align-items-center justify-content-center\"><i class=\"bi bi-arrow-up-short\"></i></a>\r\n\r\n    <script type=\"text/javascript\" src=\"https://7em.app/admin/public/assets/js/jquery.min.js\"></script>\r\n    <script type=\"text/javascript\" src=\"https://7em.app/admin/public/assets/vendor/apexcharts/apexcharts.min.js\"></script>\r\n    <script type=\"text/javascript\" src=\"https://7em.app/admin/public/assets/vendor/bootstrap/js/bootstrap.bundle.min.js\"></script>\r\n    <script type=\"text/javascript\" src=\"https://7em.app/admin/public/assets/vendor/chart.js/chart.umd.js\"></script>\r\n    <script type=\"text/javascript\" src=\"https://7em.app/admin/public/assets/vendor/echarts/echarts.min.js\"></script>\r\n    <script type=\"text/javascript\" src=\"https://7em.app/admin/public/assets/vendor/quill/quill.min.js\"></script>\r\n    <script type=\"text/javascript\" src=\"https://7em.app/admin/public/assets/vendor/simple-datatables/simple-datatables.js\"></script>\r\n    <script type=\"text/javascript\" src=\"https://7em.app/admin/public/assets/vendor/tinymce/tinymce.min.js\"></script>\r\n    <script type=\"text/javascript\" src=\"https://7em.app/admin/public/assets/js/common.js\"></script>\r\n    <script type=\"text/javascript\" src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery-validate/1.19.1/jquery.validate.min.js\"></script>\r\n    <script type=\"text/javascript\" src=\"https://7em.app/admin/public/assets/js/main.js\"></script>\r\n    <script type=\"text/javascript\" src=\"https://7em.app/admin/public/assets/validation/login.js\"></script>\r\n  </body>\r\n</html>";
  bool _isLoading = true;
  // late WebViewController _controller;
  late final _controller = WebViewController()
    // ..loadHtmlString(htmlContent)
    ..setJavaScriptMode(JavaScriptMode.unrestricted)
    // ..runJavaScript(
    //     "document.getElementsByTagName('body')[0].style.display='none';")
    // ..loadRequest(Uri.parse(widget.urll))
    ..enableZoom(false);

  @override
  void initState() {
    // TODO: implement initState
    super.initState();
    WidgetsBinding.instance.addPostFrameCallback((_) {
      _controller.loadHtmlString(
          Provider.of<myAdsViewmodel>(context, listen: false).htmlContent);
    });
  }
  // WebViewWidget(
  //           initialUrl: Uri.dataFromString(htmlContent,
  //                   mimeType: 'text/html',
  //                   encoding: Encoding.getByName('utf-8'))
  //               .toString(),
  //           javascriptMode: JavascriptMode.unrestricted,
  //           onWebViewCreated: (WebViewController webViewController) {
  //             _controller = webViewController;
  //           },
  //         ),

  @override
  Widget build(BuildContext context) {
    // _controller.scrollTo(0, 0);
    return Scaffold(
        appBar: AppBar(
          title: Text(""),
        ),
        body: SafeArea(
            child: Padding(
                padding: const EdgeInsets.only(left: 10, right: 10),
                child: WebViewWidget(controller: _controller))));
  }
}
